<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Home</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Home</h1>

    



    


    <h3> </h3>










    




    <section>
        <article><h2>postmessage-json-rpc <a href="https://travis-ci.org/motiz88/postmessage-json-rpc"><img src="https://travis-ci.org/motiz88/postmessage-json-rpc.svg?branch=master" alt="Build Status"></a> <a href="https://coveralls.io/github/motiz88/postmessage-json-rpc?branch=master"><img src="https://coveralls.io/repos/motiz88/postmessage-json-rpc/badge.svg?branch=master&amp;service=github" alt="Coverage Status"></a></h2><p>JSON-RPC over <code>window.postMessage</code>, with a Promise-based API.</p>
<p>This package provides a server and client written in JavaScript that can communicate with each other across browser windows or <code>iframe</code>s using a subset of JSON-RPC 2.0.</p>
<h2>Code Example</h2><h3>ES2015</h3><pre class="prettyprint source lang-javascript"><code>import {Client, Server} from 'postmessage-json-rpc';
const client = new Client();
const server = new Server({
    hello(who) {
        return Promise.resolve(`Hello ${who}!`);
    }
});

client.mount(window);
server.mount(window);

client.request('hello', window, 'world, of course')
    .then(answer => console.log(answer));

// Hello world, of course!</code></pre><h3>ES5</h3><pre class="prettyprint source lang-javascript"><code>var rpc = require('postmessage-json-rpc');
var client = new rpc.Client();
var server = new rpc.Server({
    hello: function(who) {
        return Promise.resolve('Hello ' + who + '!');
    }
});

client.mount(window);
server.mount(window);

client.request('hello', window, 'world, of course').then(function (answer) {
    return console.log(answer);
});

// Hello world, of course!</code></pre><h2>Motivation</h2><p>I had a need to quickly &quot;componentize&quot; a legacy web app from an older project, so I could run it in an <code>iframe</code> in a new project and invoke bits of its internal API. I implemented a basic RPC server (for the legacy app) and client (for the host app) using <code>window.postMessage</code>/<code>window.onmessage</code> as the communication channel and (at the moment, loosely) JSON-RPC 2.0 as the message format, and that became the basis of <code>postmessage-json-rpc</code>.</p>
<p>There were already some libraries that did something like this, but I really wanted a fully Promise-based async API on both the client and server side. So I coded one myself :smile:</p>
<h2>Status/Caveats</h2><p>The JSON-RPC 2.0 implementation here is not complete, in that batch requests (at least) are not implemented, and there may be some other subtle discrepancies at the moment. Still, for what it does, the module is quite usable.</p>
<h2>Installation</h2><pre class="prettyprint source lang-sh"><code>npm install --save postmessage-json-rpc</code></pre><p>Use Browserify / Webpack to include this module in your front-end code.</p>
<h2>API Reference</h2><p><a href="https://motiz88.github.io/postmessage-json-rpc/doc/">Basic documentation is available on GitHub.</a></p>
<h2>Tests</h2><p>Clone this repo, and then run:</p>
<pre class="prettyprint source lang-sh"><code>npm install
karma start --single-run</code></pre><h2>Contributors</h2><p>I welcome and greatly appreciate bug reports, feature ideas, and pull requests in all areas.</p>
<h2>License</h2><p>MIT</p></article>
    </section>






</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Client.html">Client</a></li><li><a href="Server.html">Server</a></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0-dev</a> on Sun Jul 12 2015 18:33:06 GMT+0300 (Jerusalem Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>